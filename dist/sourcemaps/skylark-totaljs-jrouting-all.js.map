{"version":3,"sources":["skylark-totaljs-jrouting-all.js"],"names":["define","obj1","path","obj2","split","length","ns","i","name","_attach","skylark","attach","obj","main","JRFU","jR","LIMIT_HISTORY","LIMIT_HISTORY_ERROR","version","cache","routes","history","errors","events","eventsOnce","global","query","params","middlewares","repository","url","model","isFirst","isReady","isRefresh","isModernBrowser","pushState","hashtags","count","window","jRouting","remove","this","id","push","on","fn","e","once","emit","lengthOnce","tmp","arguments","apply","route","middleware","init","Array","priority","indexOf","_route","trim","mid","roles","options","forEach","item","substring","pending","sort","a","b","refresh","location","reload","async","jRoute","shift","is404","charCodeAt","arr","_route_param","routeUrl","value","_route_compare","skip","index","prepareUrl","self","notfound","raw","toLowerCase","_params","l","j","next","call","err","status","Error","prev","back","pop","redirect","code","message","hash","href","data","slice","param","decodeURIComponent","isArray","d","c","prototype","callback","undefined","setTimeout","String","text","error","date","Date","clientside","selector","$","document","preventDefault","el","attr","g","jquery","replace","handler","filter","bind","ready","pathname","tangular","globals","W","ROUTE"],"mappings":"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","file":"../skylark-totaljs-jrouting-all.js","sourcesContent":["define('skylark-langx-ns/_attach',[],function(){\r\n    return  function attach(obj1,path,obj2) {\r\n        if (typeof path == \"string\") {\r\n            path = path.split(\".\");//[path]\r\n        };\r\n        var length = path.length,\r\n            ns=obj1,\r\n            i=0,\r\n            name = path[i++];\r\n\r\n        while (i < length) {\r\n            ns = ns[name] = ns[name] || {};\r\n            name = path[i++];\r\n        }\r\n\r\n        return ns[name] = obj2;\r\n    }\r\n});\ndefine('skylark-langx-ns/ns',[\r\n    \"./_attach\"\r\n], function(_attach) {\r\n    var skylark = {\r\n    \tattach : function(path,obj) {\r\n    \t\treturn _attach(skylark,path,obj);\r\n    \t}\r\n    };\r\n    return skylark;\r\n});\r\n\ndefine('skylark-langx-ns/main',[\r\n\t\"./ns\"\r\n],function(skylark){\r\n\treturn skylark;\r\n});\ndefine('skylark-langx-ns', ['skylark-langx-ns/main'], function (main) { return main; });\n\ndefine('skylark-langx/skylark',[\r\n    \"skylark-langx-ns\"\r\n], function(ns) {\r\n\treturn ns;\r\n});\r\n\ndefine('skylark-totaljs-jrouting/jR',[\n\t\"skylark-langx/skylark\"\n],function(skylark){\n\tvar JRFU = {};\n\tvar jR = {\n\t\tLIMIT_HISTORY: 100,\n\t\tLIMIT_HISTORY_ERROR: 100,\n\t\tversion: 'v3.0.0',\n\t\tcache: {},\n\t\troutes: [],\n\t\thistory: [],\n\t\terrors: [],\n\t\tevents: {},\n\t\teventsOnce: {},\n\t\tglobal: {},\n\t\tquery: {},\n\t\tparams: [],\n\t\tmiddlewares: {},\n\t\trepository: {},\n\t\turl: '',\n\t\tmodel: null,\n\t\tisFirst: true,\n\t\tisReady: false,\n\t\tisRefresh: false,\n\t\tisModernBrowser: history.pushState ? true : false,\n\t\thashtags: false,\n\t\tcount: 0\n\t};\n\n\tif (!window.jR)\n\t\twindow.jR = jR;\n\n\tif (!window.jRouting)\n\t\twindow.jRouting = jR;\n\n\tif (!window.JRFU)\n\t\twindow.JRFU = JRFU;\n\n\tjR.remove = function(url) {\n\t\tvar self = this;\n\t\tvar routes = [];\n\t\tfor (var i = 0, length = self.routes.length; i < length; i++)\n\t\t\tself.routes[i].id !== url && routes.push(self.routes[i]);\n\t\tself.routes = routes;\n\t\treturn self;\n\t};\n\n\tjR.on = function(name, fn) {\n\t\tvar self = this;\n\t\tvar e = self.events[name];\n\t\tif (e)\n\t\t\te.push(fn);\n\t\telse\n\t\t\tself.events[name] = [fn];\n\t\treturn self;\n\t};\n\n\tjR.once = function(name, fn) {\n\t\tvar self = this;\n\t\tvar e = self.eventsOnce[name];\n\t\tif (e)\n\t\t\te.push(fn);\n\t\telse\n\t\t\tself.eventsOnce[name] = [fn];\n\t\treturn self;\n\t};\n\n\tjR.emit = function(name) {\n\n\t\tvar self = this;\n\t\tvar events = self.events[name] || [];\n\t\tvar eventsOnce = self.eventsOnce[name] || [];\n\t\tvar length = events.length;\n\t\tvar lengthOnce = eventsOnce.length;\n\n\t\tif (!length && !lengthOnce)\n\t\t\treturn self;\n\n\t\tvar params = [];\n\t\tvar tmp = arguments.length;\n\n\t\tfor (var i = 1; i < tmp; i++)\n\t\t\tparams.push(arguments[i]);\n\n\t\tif (length > 0) {\n\t\t\tfor (var i = 0; i < length; i++)\n\t\t\t\tevents[i].apply(self, params);\n\t\t}\n\n\t\tif (lengthOnce) {\n\t\t\tfor (var i = 0; i < length; i++)\n\t\t\t\teventsOnce[i].apply(self, params);\n\t\t\tdelete self.eventsOnce[name];\n\t\t}\n\n\t};\n\n\tjR.route = function(url, fn, middleware, init) {\n\n\t\tvar tmp;\n\n\t\tif (fn instanceof Array) {\n\t\t\tvar tmp = middleware;\n\t\t\tmiddleware = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\tif (typeof(middleware) === 'function') {\n\t\t\ttmp = init;\n\t\t\tinit = middleware;\n\t\t\tmiddleware = tmp;\n\t\t}\n\n\t\tvar priority = url.count('/') + (url.indexOf('*') === -1 ? 0 : 10);\n\t\tvar route = jR._route(url.trim());\n\t\tvar params = [];\n\n\t\tif (typeof(middleware) === 'string')\n\t\t\tmiddleware = middleware.split(',');\n\n\t\tvar mid = [];\n\t\tvar roles = [];\n\t\tvar options = {};\n\n\t\t(middleware instanceof Array) && middleware.forEach(function(item) {\n\t\t\tif (typeof(item) === 'object')\n\t\t\t\toptions = item;\n\t\t\telse if (item.substring(0, 1) === '@')\n\t\t\t\troles.push(item.substring(1));\n\t\t\telse\n\t\t\t\tmid.push(item);\n\t\t});\n\n\t\tif (url.indexOf('{') !== -1) {\n\t\t\tpriority -= 100;\n\t\t\tfor (var i = 0; i < route.length; i++)\n\t\t\t\troute[i].substring(0, 1) === '{' && params.push(i);\n\t\t\tpriority -= params.length;\n\t\t}\n\n\t\tjR.remove(url);\n\t\tjR.routes.push({ id: url, url: route, fn: fn, priority: priority, params: params, middleware: mid.length ? mid : null, init: init, count: 0, pending: false, options: options, roles: roles });\n\t\tjR.routes.sort(function(a, b) {\n\t\t\treturn a.priority > b.priority ? -1 : a.priority < b.priority ? 1 :0;\n\t\t});\n\n\t\treturn jR;\n\t};\n\n\tjR.middleware = function(name, fn) {\n\t\tvar self = this;\n\t\tself.middlewares[name] = fn;\n\t\treturn self;\n\t};\n\n\tjR.refresh = function() {\n\t\tvar self = this;\n\t\treturn self.location(self.url, true);\n\t};\n\n\tjR.reload = function() {\n\t\treturn jR.refresh();\n\t};\n\n\tjR.async = function() {\n\t\tif (!window.jRoute || !window.jRoute.length)\n\t\t\treturn;\n\t\twhile (true) {\n\t\t\tvar fn = window.jRoute.shift();\n\t\t\tif (!fn)\n\t\t\t\tbreak;\n\t\t\tfn();\n\t\t}\n\t\tjR.is404 && jR.location(jR.url);\n\t};\n\n\tjR._route = function(url) {\n\n\t\tif (url.charCodeAt(0) === 47)\n\t\t\turl = url.substring(1);\n\n\t\tif (url.charCodeAt(url.length - 1) === 47)\n\t\t\turl = url.substring(0, url.length - 1);\n\n\t\tvar arr = url.split('/');\n\t\tif (arr.length === 1 && !arr[0])\n\t\t\tarr[0] = '/';\n\n\t\treturn arr;\n\t};\n\n\tjR._route_param = function(routeUrl, route) {\n\t\tvar arr = [];\n\n\t\tif (!route || !routeUrl)\n\t\t\treturn arr;\n\n\t\tvar length = route.params.length;\n\t\tif (length) {\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tvar value = routeUrl[route.params[i]];\n\t\t\t\tarr.push(value === '/' ? '' : value);\n\t\t\t}\n\t\t}\n\n\t\treturn arr;\n\t};\n\n\tjR._route_compare = function(url, route) {\n\n\t\tvar length = url.length;\n\t\tvar skip = length === 1 && url[0] === '/';\n\n\t\tif (route.length !== length)\n\t\t\treturn false;\n\n\t\tfor (var i = 0; i < length; i++) {\n\n\t\t\tvar value = route[i];\n\t\t\tif (!value)\n\t\t\t\treturn false;\n\n\t\t\tif (!skip && value.charCodeAt(0) === 123)\n\t\t\t\tcontinue;\n\n\t\t\tif (value === '*')\n\t\t\t\treturn true;\n\n\t\t\tif (url[i] !== value)\n\t\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tjR.location = function(url, isRefresh) {\n\n\t\tif (!jR.isReady)\n\t\t\treturn;\n\n\t\tvar index = url.indexOf('?');\n\t\tif (index !== -1)\n\t\t\turl = url.substring(0, index);\n\n\t\turl = JRFU.prepareUrl(url);\n\t\turl = JRFU.path(url);\n\n\t\tvar self = this;\n\t\tvar path = self._route(url);\n\t\tvar routes = [];\n\t\tvar notfound = true;\n\t\tvar raw = [];\n\n\t\traw.push.apply(raw, path);\n\n\t\tfor (var i = 0, length = path.length; i < length; i++)\n\t\t\tpath[i] = path[i].toLowerCase();\n\n\t\tself.isRefresh = isRefresh || false;\n\t\tself.count++;\n\n\t\tif (!isRefresh && self.url.length && self.history[self.history.length - 1] !== self.url) {\n\t\t\tself.history.push(self.url);\n\t\t\tself.history.length > self.LIMIT_HISTORY && self.history.shift();\n\t\t}\n\n\t\tvar length = self.routes.length;\n\t\tfor (var i = 0; i < length; i++) {\n\n\t\t\tvar route = self.routes[i];\n\t\t\tif (!self._route_compare(path, route.url))\n\t\t\t\tcontinue;\n\n\t\t\tif (route.url.indexOf('*') === -1)\n\t\t\t\tnotfound = false;\n\n\t\t\tif (route.once && route.count > 0)\n\t\t\t\tcontinue;\n\n\t\t\troute.count++;\n\t\t\troutes.push(route);\n\t\t\tbreak;\n\t\t}\n\n\t\tvar isError = false;\n\t\tvar error = [];\n\n\t\t// cache old repository\n\n\t\tif (self.url.length)\n\t\t\tself.cache[self.url] = self.repository;\n\n\t\tself.url = url;\n\t\tself.repository = self.cache[url];\n\n\t\tif (!self.repository)\n\t\t\tself.repository = {};\n\n\t\tself._params();\n\t\tself.params = self._route_param(raw, route);\n\t\tself.is404 = false;\n\t\tself.emit('location', url);\n\t\tlength = routes.length;\n\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tvar route = routes[i];\n\n\t\t\tif (route.pending)\n\t\t\t\tcontinue;\n\n\t\t\tif (!route.middleware || !route.middleware.length) {\n\t\t\t\tif (!route.init) {\n\t\t\t\t\troute.fn.apply(self, self.params);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\troute.pending = true;\n\n\t\t\t\t(function(route) {\n\t\t\t\t\troute.init(function() {\n\t\t\t\t\t\troute.fn.apply(self, self.params);\n\t\t\t\t\t\troute.pending = false;\n\t\t\t\t\t});\n\t\t\t\t})(route);\n\n\t\t\t\troute.init = null;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t(function(route) {\n\n\t\t\t\tvar l = route.middleware.length;\n\t\t\t\tvar middleware = [];\n\n\t\t\t\tfor (var j = 0; j < l; j++) {\n\t\t\t\t\tvar fn = jR.middlewares[route.middleware[j]];\n\t\t\t\t\tfn && (function(route, fn) {\n\t\t\t\t\t\tmiddleware.push(function(next) {\n\t\t\t\t\t\t\tfn.call(jR, next, route.options, route.roles, route);\n\t\t\t\t\t\t});\n\t\t\t\t\t})(route, fn);\n\t\t\t\t}\n\n\t\t\t\tif (!route.init) {\n\t\t\t\t\troute.pending = true;\n\t\t\t\t\tmiddleware.middleware(function(err) {\n\t\t\t\t\t\t!err && route.fn.apply(jR, jR.params);\n\t\t\t\t\t\troute.pending = false;\n\t\t\t\t\t}, route);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\troute.pending = true;\n\t\t\t\troute.init(function() {\n\t\t\t\t\tmiddleware.middleware(function(err) {\n\t\t\t\t\t\t!err && route.fn.apply(jR, jR.params);\n\t\t\t\t\t\troute.pending = false;\n\t\t\t\t\t}, route);\n\t\t\t\t});\n\n\t\t\t\troute.init = null;\n\t\t\t})(route);\n\t\t}\n\n\t\tisError && self.status(500, error);\n\t\tself.is404 = true;\n\t\tnotfound && self.status(404, new Error('Route not found.'));\n\t};\n\n\tjR.prev = function() {\n\t\treturn this.history[this.history.length - 1];\n\t};\n\n\tjR.back = function() {\n\t\tvar self = this;\n\t\tvar url = self.history.pop() || '/';\n\t\tself.url = '';\n\t\tself.redirect(url, true);\n\t\treturn self;\n\t};\n\n\tjR.status = function(code, message) {\n\t\tvar self = this;\n\t\tself.emit('status', code || 404, message);\n\t\treturn self;\n\t};\n\n\tjR.redirect = function(url, model) {\n\t\tvar self = this;\n\n\t\tif (url.charCodeAt(0) === 35) {\n\t\t\tlocation.hash = url;\n\t\t\tself.model = model || null;\n\t\t\tself.location(url, false);\n\t\t\treturn self;\n\t\t}\n\n\t\tif (!self.isModernBrowser) {\n\t\t\tlocation.href = url;\n\t\t\treturn false;\n\t\t}\n\n\t\thistory.pushState(null, null, url);\n\t\tself.model = model || null;\n\t\tself.location(url, false);\n\t\treturn self;\n\t};\n\n\tjR._params = function() {\n\n\t\tvar self = this;\n\t\tvar data = {};\n\n\t\tvar params = location.href.slice(location.href.indexOf('?') + 1).split('&');\n\n\t\tfor (var i = 0; i < params.length; i++) {\n\n\t\t\tvar param = params[i].split('=');\n\t\t\tif (param.length !== 2)\n\t\t\t\tcontinue;\n\n\t\t\tvar name = decodeURIComponent(param[0]);\n\t\t\tvar value = decodeURIComponent(param[1]);\n\t\t\tvar isArray = data[name] instanceof Array;\n\n\t\t\tif (data[name] && !isArray)\n\t\t\t\tdata[name] = [data[name]];\n\n\t\t\tif (isArray)\n\t\t\t\tdata[name].push(value);\n\t\t\telse\n\t\t\t\tdata[name] = value;\n\t\t}\n\n\t\tself.query = data;\n\t\treturn self;\n\t};\n\n\tjR.path = JRFU.path = function (url, d) {\n\n\t\tif (url.substring(0, 1) === '#')\n\t\t\treturn url;\n\n\t\tif (!d)\n\t\t\td = '/';\n\n\t\tvar index = url.indexOf('?');\n\t\tvar params = '';\n\n\t\tif (index !== -1) {\n\t\t\tparams = url.substring(index);\n\t\t\turl = url.substring(0, index);\n\t\t}\n\n\t\tvar l = url.length;\n\t\tvar c = url.substring(l - 1, l);\n\t\tif (c !== d)\n\t\t\turl += d;\n\n\t\treturn url + params;\n\t};\n\n\tJRFU.prepareUrl = function(url) {\n\t\tif (url.substring(0, 1) === '#')\n\t\t\treturn url;\n\t\tvar index = url.indexOf('#');\n\t\treturn index !== -1 ? url.substring(0, index) : url;\n\t};\n\n\tif (!Array.prototype.middleware) {\n\t\tArray.prototype.middleware = function(callback, route) {\n\n\t\t\tvar self = this;\n\t\t\tvar item = self.shift();\n\n\t\t\tif (item === undefined) {\n\t\t\t\tcallback && callback();\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\titem(function(err) {\n\t\t\t\tif (err instanceof Error || err === false)\n\t\t\t\t\tcallback && callback(err === false ? true : err);\n\t\t\t\telse setTimeout(function() {\n\t\t\t\t\tself.middleware(callback, route);\n\t\t\t\t}, 1);\n\t\t\t}, route.options, route.roles);\n\n\t\t\treturn self;\n\t\t};\n\t}\n\n\tif (!String.prototype.count) {\n\t\tString.prototype.count = function(text) {\n\t\t\tvar index = 0;\n\t\t\tvar count = 0;\n\t\t\tdo {\n\t\t\t\tindex = this.indexOf(text, index + text.length);\n\t\t\t\tif (index > 0)\n\t\t\t\t\tcount++;\n\t\t\t} while (index > 0);\n\t\t\treturn count;\n\t\t};\n\t}\n\n\tjR.on('error', function (err, url, name) {\n\t\tvar self = this;\n\t\tself.errors.push({ error: err, url: url, name: name, date: new Date() });\n\t\tself.errors.length > self.LIMIT_HISTORY_ERROR && self.errors.shift();\n\t});\n\n\tjR.clientside = function(selector) {\n\t\t$(document).on('click', selector, function(e) {\n\t\t\te.preventDefault();\n\t\t\tvar el = $(this);\n\t\t\tjR.redirect(el.attr('href') || el.attr('data-jrouting') || el.attr('data-jr'));\n\t\t});\n\t\treturn jR;\n\t};\n\n\tfunction jRinit() {\n\t\tjR.async();\n\t\t$.fn.jRouting = function(g) {\n\n\t\t\tif (jR.hashtags || !jR.isModernBrowser)\n\t\t\t\treturn this;\n\n\t\t\tvar version = +$.fn.jquery.replace(/\\./g, '');\n\t\t\tif (version >= 300 && g === true)\n\t\t\t\tthrow Error('$(selector).jRouting() doesn\\'t work in jQuery +3. Instead of this use jR.clientside(selector).');\n\n\t\t\tvar handler = function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tjR.redirect($(this).attr('href'));\n\t\t\t};\n\n\t\t\tif (g)\n\t\t\t\t$(document).on('click', this.selector, handler);\n\t\t\telse\n\t\t\t\tthis.filter('a').bind('click', handler);\n\n\t\t\treturn this;\n\t\t};\n\n\t\t$(document).ready(function() {\n\n\t\t\tjR.async();\n\n\t\t\tif (jR.hashtags)\n\t\t\t\tjR.url = location.hash || JRFU.path(JRFU.prepareUrl(location.pathname));\n\t\t\telse\n\t\t\t\tjR.url = JRFU.path(JRFU.prepareUrl(location.pathname));\n\n\t\t\tif (jR.events.ready) {\n\t\t\t\tjR.emit('ready', jR.url);\n\t\t\t\tjR.emit('load', jR.url);\n\t\t\t} else {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tjR.isReady = true;\n\t\t\t\t\tjR.location(jR.url);\n\t\t\t\t\tjR.emit('ready', jR.url);\n\t\t\t\t\tjR.emit('load', jR.url);\n\t\t\t\t}, 5);\n\t\t\t}\n\n\t\t\t$(window).on('hashchange', function() {\n\t\t\t\tif (!jR.isReady || !jR.hashtags)\n\t\t\t\t\treturn;\n\t\t\t\tjR.location(JRFU.path(location.hash));\n\t\t\t});\n\n\t\t\t$(window).on('popstate', function() {\n\t\t\t\tif (!jR.isReady || jR.hashtags)\n\t\t\t\t\treturn;\n\t\t\t\tvar url = JRFU.path(location.pathname);\n\t\t\t\tjR.url !== url && jR.location(url);\n\t\t\t});\n\t\t});\n\t}\n\n\tjRinit();\n\n\treturn skylark.attach(\"intg.totaljs.jR\",jR);\n\n});\n\n\n\n\ndefine('skylark-totaljs-jrouting/globals',[\r\n\t\"./jR\"\r\n],function(tangular){\r\n\treturn tangular.globals = function() {\r\n\t\tvar W = window;\r\n\r\n\t\tW.jR = jR;\r\n\t\t\r\n\t\tW.ROUTE = function(url, fn, middleware, init) {\r\n\t\t\treturn jR.route(url, fn, middleware, init);\r\n\t\t};\t\r\n\r\n\t\tsetTimeout(jR.async, 500);\r\n\t\tsetTimeout(jR.async, 1000);\r\n\t\tsetTimeout(jR.async, 2000);\r\n\t\tsetTimeout(jR.async, 3000);\r\n\t\tsetTimeout(jR.async, 5000);\r\n\r\n\t\treturn W;\r\n\t};\r\nx});\r\n\ndefine('skylark-totaljs-jrouting/main',[\r\n\t\"./jR\",\r\n\t\"./globals\"\r\n],function(jR){\r\n\r\n\treturn jR;\r\n});\ndefine('skylark-totaljs-jrouting', ['skylark-totaljs-jrouting/main'], function (main) { return main; });\n\n"]}