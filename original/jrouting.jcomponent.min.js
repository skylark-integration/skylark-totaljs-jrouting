!function(r){function t(){n.async(),$(document).ready(function(){n.async(),n.hashtags?n.url=i.hash||e.path(e.prepareUrl(i.pathname)):n.url=e.path(e.prepareUrl(i.pathname)),setTimeout(function(){n.isReady=!0,n.location(n.url)},5),$(window).on('hashchange',function(){n.isReady&&n.hashtags&&n.location(e.path(i.hash))}),$(window).on('popstate',function(){if(n.isReady&&!n.hashtags){var r=e.path(i.pathname);n.url!==r&&n.location(r)}})})}var e={},n={LIMIT_HISTORY:100,LIMIT_HISTORY_ERROR:100,version:'v5.3.0',cache:{},routes:[],$prev:[],$next:[],errors:[],global:{},query:{},params:[],middlewares:{},repository:{},url:'',model:null,isFirst:!0,isReady:!1,isRefresh:!1,isModernBrowser:!!history.pushState,hashtags:!1,count:0};n.history=n.$prev;var i=location;!r.jR&&(r.jR=n),!r.NAVIGATION&&(r.NAVIGATION=n),!r.NAV&&(r.NAV=n),n.remove=function(r){r=r.env(!0).ROOT(!0);for(var t=[],e=0,i=n.routes.length;e<i;e++)n.routes[e].id!==r&&t.push(n.routes[e]);return n.routes=t,n},n.on=function(r,t){return ON(r,t),n},n.emit=function(){EMIT.apply(window,arguments)},n.autosave=function(){n.$save=1},n.save=function(){try{localStorage.setItem(MAIN.$localstorage+'.nav',STRINGIFY({prev:n.$prev,next:n.$next,ts:new Date}))}catch(r){}},n.load=function(){try{var r=PARSE(localStorage.getItem(MAIN.$localstorage+'.nav')||'null');r&&(r.prev instanceof Array&&(n.$prev=n.history=r.prev),r.next instanceof Array&&(n.$next=r.next),n.$pop=!0)}catch(r){}},n.route=function(t,e,i,o){if(e instanceof Array){var a=i;i=e,e=a}'function'==typeof i&&(a=o,o=i,i=a);var u=(t=t.env(!0).ROOT(!0)).jRcount('/')+(-1===t.indexOf('*')?0:10),s=n._route(t.trim()),l=[];'string'==typeof i&&(i=i.split(','));var p=[],c=[],f={};if(i instanceof Array&&i.forEach(function(r){'object'==typeof r?f=r:'@'===r.substring(0,1)?c.push(r.substring(1)):p.push(r)}),-1!==t.indexOf('{')){u-=100;for(var h=0;h<s.length;h++)'{'===s[h].substring(0,1)&&l.push(h);u-=l.length}return n.remove(t),n.routes.push({id:t,url:s,fn:e,priority:u,params:l,middleware:p.length?p:null,init:o,count:0,pending:!1,options:f,roles:c}),n.routes.sort(function(r,t){return r.priority>t.priority?-1:r.priority<t.priority?1:0}),n.is404&&t===n.url&&r.REDIRECT(t+(n.queryraw?'?'+n.queryraw:'')),n.emit('route',t),n},r.MIDDLEWARE=n.middleware=function(r,t){return r instanceof Array?(r.wait(function(r,t){var e=n.middlewares[r];e?e(t):t()},t),n):(n.middlewares[r]=t,n)},n.refresh=function(){return n.location(n.url,!0)},n.reload=function(){return n.refresh()},n.async=function(){if(r.jRoute&&r.jRoute.length){for(;;){var t=r.jRoute.shift();if(!t)break;t()}n.is404&&n.location(n.url)}},n._route=function(r){47===r.charCodeAt(0)&&(r=r.substring(1)),47===r.charCodeAt(r.length-1)&&(r=r.substring(0,r.length-1));var t=r.split('/');return 1!==t.length||t[0]||(t[0]='/'),t},n._route_param=function(r,t){var e=[];if(!t||!r)return e;var n=t.params.length;if(n)for(var i=0;i<n;i++){var o=r[t.params[i]];e.push('/'===o?'':o)}return e},n._route_compare=function(r,t){var e=r.length,n=1===e&&'/'===r[0];if(t.length!==e)return!1;for(var i=0;i<e;i++){var o=t[i];if(!o)return!1;if(n||123!==o.charCodeAt(0)){if('*'===o)return!0;if(r[i]!==o)return!1}}return!0},n.location=function(r,t){if(n.isReady){var i=r.indexOf('?');-1!==i&&(r=r.substring(0,i)),r=e.prepareUrl(r),r=e.path(r);var o=n._route(r),a=[],u=!0,s=[];s.push.apply(s,o);for(var l=0,p=o.length;l<p;l++)o[l]=o[l].toLowerCase();n.isRefresh=t||!1,n.count++,!t&&n.url.length&&n.prev()!==n.url&&(n.$pop?n.$pop=!1:(n.$prev.push(n.url),n.$prev.length>n.LIMIT_HISTORY&&n.$prev.shift(),n.$next.length>n.LIMIT_HISTORY&&n.$next.shift(),n.$save&&n.save())),n.isback!==n.$prev.length&&SET('NAV.isback',n.$prev.length),n.isforward!==n.$next.length&&SET('NAV.isforward',n.$next.length);for(var p=n.routes.length,l=0;l<p;l++){var c=n.routes[l];if(n._route_compare(o,c.url)&&(-1===c.url.indexOf('*')&&(u=!1),!(c.once&&c.count>0))){c.count++,a.push(c);break}}n.url.length&&(n.cache[n.url]=n.repository);var f=n.url;n.url=r,n.url!==f&&UPDATE('NAV.url'),n.repository=n.cache[r],n.repository||(n.repository={}),n._params(),n.params=n._route_param(s,c),n.is404=!1,n.emit('location',r),p=a.length;for(l=0;l<p;l++)if(!(c=a[l]).pending)if(c.middleware&&c.middleware.length)!function(r){for(var t=r.middleware.length,e=[],i=0;i<t;i++){var o=n.middlewares[r.middleware[i]];o&&function(r,t){e.push(function(e){t.call(n,e,r.options,r.roles,r)})}(r,o)}if(!r.init)return r.pending=!0,void e.jRmiddleware(function(t){!t&&r.fn.apply(n,n.params),r.pending=!1},r);r.pending=!0,r.init(function(){e.jRmiddleware(function(t){!t&&r.fn.apply(n,n.params),r.pending=!1},r)}),r.init=null}(c);else{if(!c.init){c.fn.apply(n,n.params);continue}c.pending=!0,function(r){r.init(function(){r.fn.apply(n,n.params),r.pending=!1})}(c),c.init=null}u?(n.is404=!0,n.status(404,new Error('Route not found.'))):n.is404=!1}},n.prev=function(){return n.$prev[n.$prev.length-1]},n.next=function(){return n.$next[n.$next.length-1]},n.back=function(t){var e=n.$prev.pop()||'/';return n.url&&n.next()!==n.url&&n.$next.push(n.url),n.url='',r.REDIRECT(e,t),n.$save&&n.save(),n},n.forward=function(t){var e=n.$next.pop()||'/';return n.url&&n.prev()!==n.url&&n.$prev.push(n.url),n.url='',r.REDIRECT(e,t),n.$save&&n.save(),n},n.status=function(r,t){return EMIT(r,t),n},r.REDIRECT=NAV.redirect=function(r,t){r||(r=n.url);var e=(r=r.env(!0).ROOT(!0)).charCodeAt(0),o=i;return 35===e?(n.model=t||null,o.hash=r,n.location(r,!1),n):n.isModernBrowser?(history.pushState(null,null,r),n.model=t||null,n.location(o.pathname+o.search,!1),n):(o.href=r,!1)},n._params=function(){var r={},t=i.href.indexOf('?');n.queryraw=-1===t?'':i.href.substring(t+1);for(var e=n.queryraw.split('&'),o=0;o<e.length;o++){var a=e[o].split('=');if(2===a.length){var u=decodeURIComponent(a[0]),s=decodeURIComponent(a[1]),l=r[u]instanceof Array;r[u]&&!l&&(r[u]=[r[u]]),l?r[u].push(s):r[u]=s}}return n.query=r,n},n.path=e.path=function(r,t){if('#'===r.substring(0,1))return r;t||(t='/');var e=r.indexOf('?'),n='';-1!==e&&(n=r.substring(e),r=r.substring(0,e));var i=r.length;return r.substring(i-1,i)!==t&&(r+=t),r+n},e.prepareUrl=function(r){if('#'===r.substring(0,1))return r;var t=r.indexOf('#');return-1!==t?r.substring(0,t):r},Array.prototype.jRmiddleware=function(r,t){var e=this,n=e.shift();return void 0===n?(r&&r(),e):(n(function(n){n instanceof Error||!1===n?r&&r(!1===n||n):setTimeout(function(){e.jRmiddleware(r,t)},1)},t.options,t.roles),e)},String.prototype.jRcount=function(r){var t=0,e=0;do{(t=this.indexOf(r,t+r.length))>0&&e++}while(t>0);return e},n.clientside=function(t){return $(document).on('click',t,function(t){t.preventDefault();var e=$(this),n=e.attr('href')||e.attr('data-jrouting')||e.attr('data-jr');'javascript:void(0)'!==n&&'#'!==n&&r.REDIRECT(n)}),n},r.jQuery?t():n.init=setInterval(function(){r.jQuery&&r.MAIN&&(clearInterval(n.init),t())},100),setTimeout(n.async,500),setTimeout(n.async,1e3),setTimeout(n.async,2e3),setTimeout(n.async,3e3),setTimeout(n.async,5e3),r.ROUTE=function(r,t,e,i){return n.route(r,t,e,i)}}(window);